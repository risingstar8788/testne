!function(){"use strict";const e=()=>{return e=null,new Promise((t=>{chrome.storage.sync.get(e,t)}));var e};var t;!function(e){e[e.Text=0]="Text",e[e.TextList=1]="TextList",e[e.Number=2]="Number",e[e.Boolean=3]="Boolean"}(t||(t={}));const l=[{key:"keywords",label:"Keywords to highlight",placeholder:"Enter each keyword to highlight on a new line",defaultValue:["d0mxss",""],type:t.TextList},{key:"ignored",label:"Files/domains to ignore",placeholder:"Do not log results with stack traces that match one of these values",defaultValue:[""],type:t.TextList},{key:"ignoredIfFirst",label:"Source files/domains to ignore",placeholder:"Ignore only if it is the source of the sink (last function in stack trace)",defaultValue:[""],type:t.TextList},{key:"maxCodeLength",label:"Truncate long code (number of characters)",placeholder:"0 = disabled",defaultValue:1024,type:t.Number},{key:"traceLimit",label:"Trace limit (ignore if sink passes by more than x functions)",placeholder:"0 = disabled",defaultValue:1024,type:t.Number},{key:"onlyLogHighlighted",label:"Only log highlighted results",placeholder:"Completely ignore results that don't contain any keywords",defaultValue:!1,type:t.Boolean},{key:"highlightKeywordMatches",label:"Highlight keyword matches",placeholder:"Might be slow if there's a large number of results or keywords",defaultValue:!0,type:t.Boolean},{key:"highlightCodeSearchResults",label:"Highlight code search results",placeholder:"Might be slow if there's a large number of results",defaultValue:!1,type:t.Boolean},{key:"groupMessagesInConsole",label:"Group messages in console",placeholder:"Put messages in console from the same page under a group",defaultValue:!1,type:t.Boolean}];let o={recordingEnabled:!0};for(const e of l)o[e.key]=e.defaultValue;let a=o;const s=()=>{e().then((e=>{a=Object.assign(Object.assign({},o),e),window.postMessage({untrustedTypes:!0,type:"settingsChanged",value:a},"*")}))};chrome.storage.onChanged.addListener(s),s(),chrome.webRequest.onBeforeRequest.addListener((()=>({redirectUrl:"data:application/json,"+encodeURIComponent(JSON.stringify(a))})),{urls:[chrome.runtime.getURL("settings.json")]},["blocking"])}();
